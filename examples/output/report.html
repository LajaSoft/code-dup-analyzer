<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Code Duplicate Analyzer Report</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 18px; }
    .card { border: 1px solid #ddd; border-radius: 12px; padding: 16px; }
    table { width: 100%; border-collapse: collapse; }
    td, th { border-bottom: 1px solid #eee; padding: 6px 8px; }
    th { text-align: left; }
    .muted { color: #666; }
    code { background: #f6f6f6; padding: 2px 6px; border-radius: 6px; }
  </style>
</head>
<body>
  <h1>Report</h1>
  <p class="muted">
    Files scanned: <b>1</b> ·
    Chunks extracted: <b>150</b> ·
    Duration: <b>0.265s</b>
  </p>

  <div class="grid">
    <div class="card">
      <h2>By language</h2>
      <table>
        <tr><th>Language</th><th style="text-align:right">Chunks</th></tr>
        <tr><td>javascript</td><td style='text-align:right'>150</td></tr>
      </table>
    </div>

    <div class="card">
      <h2>By node type</h2>
      <table>
        <tr><th>Node type</th><th style="text-align:right">Chunks</th></tr>
        <tr><td>statement_block</td><td style='text-align:right'>80</td></tr>
<tr><td>if_statement</td><td style='text-align:right'>48</td></tr>
<tr><td>function_declaration</td><td style='text-align:right'>15</td></tr>
<tr><td>try_statement</td><td style='text-align:right'>4</td></tr>
<tr><td>for_statement</td><td style='text-align:right'>2</td></tr>
<tr><td>while_statement</td><td style='text-align:right'>1</td></tr>
      </table>
    </div>

    <div class="card">
      <h2>Token bins (normalized)</h2>
      <table>
        <tr><th>Bin</th><th style="text-align:right">Chunks</th></tr>
        <tr><td><=50</td><td style='text-align:right'>66</td></tr>
<tr><td>51-150</td><td style='text-align:right'>57</td></tr>
<tr><td>151-400</td><td style='text-align:right'>26</td></tr>
<tr><td>401-1000</td><td style='text-align:right'>1</td></tr>
<tr><td>>1000</td><td style='text-align:right'>0</td></tr>
      </table>
    </div>

    <div class="card">
      <h2>Exact-dup candidates (top 20 groups)</h2>
      <p class="muted">Based on fingerprint of normalized text. Full list: <code>candidates_exact_dups.jsonl</code></p>
      <table>
        <tr><th style='text-align:right'>Group size</th><th>Fingerprint</th><th>Chunk IDs (first 5)</th></tr>
        <tr><td style='text-align:right'>3</td><td><code>9c9c81f62e918af80246fd4cb2f7a75d</code></td><td><code>a1509be1142a83101bcbf6d624693a6a, 60fb20a2e7de23f1c27cafce108f2291, 0d4f8039ed4f82929faf7a0a022b7d36</code></td></tr><tr><td style='text-align:right'>2</td><td><code>18d4039e21a2c8e8489b5a65a7772e99</code></td><td><code>8c484ff68522e04c687fdab8113f3426, 73b3bb37ace44d1d4aa92cee2ec63171</code></td></tr><tr><td style='text-align:right'>2</td><td><code>9a629cd8789e9322bac7aeb38119c0a0</code></td><td><code>9e7cebea91673e23b1b1b409ac60466b, d2156dbdfac24d5d60d5e7fc55569bef</code></td></tr><tr><td style='text-align:right'>2</td><td><code>413d1ee57e1a8f5dfd012aca46640736</code></td><td><code>f71fcab1abadd837bf23b78e493f3f16, a3cb6e647846b57965a615da4a0ef688</code></td></tr><tr><td style='text-align:right'>2</td><td><code>6ea470e22c7669b609cb05efab4dcaeb</code></td><td><code>a3098da02438aef3416db7b66a8b64f6, 4c4c9c4a6a3432eb73baa1fbd260422a</code></td></tr><tr><td style='text-align:right'>2</td><td><code>32854dca440c9b8977d49ad241edcae5</code></td><td><code>dcd6123d4456a27db0060230fb37ffe2, a4c8565f4d45976a22bbce515d6ef924</code></td></tr><tr><td style='text-align:right'>2</td><td><code>54fd3d164f7a62e91d24db4400803942</code></td><td><code>cce67ce17502cfac388318592faf8c4d, 38fe57b550a63b7dadb7a374bf9f5e7b</code></td></tr><tr><td style='text-align:right'>2</td><td><code>97351e4f675ece618f2827b4d8a272a7</code></td><td><code>9dddac8a2b9e8af263cc1c5e2ec33aff, cacaa57b41ecab5dd0fae2e33f1dd5d2</code></td></tr><tr><td style='text-align:right'>2</td><td><code>772583cfa8e671b46d50d03aa79e1bb3</code></td><td><code>efcb60b79c3207871ef07c4dfe77ef94, f320fb303b3c638aed746533e7eb85c3</code></td></tr><tr><td style='text-align:right'>2</td><td><code>706e7790c39735e20ca11f1bdd7d1a8a</code></td><td><code>ce2787cdcb8ab35a73044063b33a3e1a, 01994d19e7b090ac480b675caa16c491</code></td></tr><tr><td style='text-align:right'>2</td><td><code>9c2cb73e88b3faa7196d0840097e4fac</code></td><td><code>82e7b2bfecaaef163310b30df195ba8e, f6cf8c7e2ecfd467c4fad727e7c0dfc4</code></td></tr><tr><td style='text-align:right'>2</td><td><code>eb5b912bb7169b9e292c0a4dd9199dc9</code></td><td><code>435979549fd0b85e1532d4eee4a23f8e, 00025a0607f7a507c0c08976787d7a51</code></td></tr><tr><td style='text-align:right'>2</td><td><code>383f06069b519c0227fad4887906172c</code></td><td><code>cd2a6efa4d68cc0dcfbe07e6b04b32f4, d852dd5c2c727968814d61908f803c81</code></td></tr><tr><td style='text-align:right'>2</td><td><code>b18dfc7104f23d8100e32e896d9c3ee3</code></td><td><code>233406b556b2dad20378656d6992811a, 0e97c5ef90150e75e5a92fc0a77cd182</code></td></tr>
      </table>
      <p class="muted">Use <code>chunk_ids</code> to lookup raw code in <code>chunks.jsonl</code> (fields: path, start_line, end_line, raw_text).</p>
    </div>

    <div class="card">
      <h2>Duplicate samples (top groups)</h2>
      <p class="muted">Showing up to 5 chunks per group with raw code preview (truncated at 800 chars).</p>
      <div style='margin-bottom:12px'><div class='muted'>Fingerprint: <code>9c9c81f62e918af80246fd4cb2f7a75d</code> · size 3</div><table><tr><th>chunk_id</th><th>path:lines</th><th>code preview</th></tr><tr><td><code>a1509be1142a83101bcbf6d624693a6a</code></td><td><code>main.js:112-115</code></td><td><pre style='white-space:pre-wrap'>if (anchor.jointRotor) {
      anchor.jointAngle = val;
      anchor.jointRotor.rotation.y = THREE.MathUtils.degToRad(val);
    }</pre></td></tr><tr><td><code>60fb20a2e7de23f1c27cafce108f2291</code></td><td><code>main.js:268-271</code></td><td><pre style='white-space:pre-wrap'>if (targetAnchor.jointRotor) {
      targetAnchor.jointAngle = currentJointAngle;
      targetAnchor.jointRotor.rotation.y = THREE.MathUtils.degToRad(currentJointAngle);
    }</pre></td></tr><tr><td><code>0d4f8039ed4f82929faf7a0a022b7d36</code></td><td><code>main.js:282-285</code></td><td><pre style='white-space:pre-wrap'>if (parentAnchor.jointRotor) {
      parentAnchor.jointAngle = currentJointAngle;
      parentAnchor.jointRotor.rotation.y = THREE.MathUtils.degToRad(currentJointAngle);
    }</pre></td></tr></table></div><div style='margin-bottom:12px'><div class='muted'>Fingerprint: <code>18d4039e21a2c8e8489b5a65a7772e99</code> · size 2</div><table><tr><th>chunk_id</th><th>path:lines</th><th>code preview</th></tr><tr><td><code>8c484ff68522e04c687fdab8113f3426</code></td><td><code>main.js:82-85</code></td><td><pre style='white-space:pre-wrap'>if (!allowedPoints.includes(p)) {
      showToast(`Точка ${p} недоступна для модуля ${currentModuleType}`);
      return;
    }</pre></td></tr><tr><td><code>73b3bb37ace44d1d4aa92cee2ec63171</code></td><td><code>main.js:640-643</code></td><td><pre style='white-space:pre-wrap'>if (!allowedPoints.includes(key)) {
        showToast(`Точка ${key} недоступна для модуля ${chosenType}`);
        return;
      }</pre></td></tr></table></div><div style='margin-bottom:12px'><div class='muted'>Fingerprint: <code>9a629cd8789e9322bac7aeb38119c0a0</code> · size 2</div><table><tr><th>chunk_id</th><th>path:lines</th><th>code preview</th></tr><tr><td><code>9e7cebea91673e23b1b1b409ac60466b</code></td><td><code>main.js:121-127</code></td><td><pre style='white-space:pre-wrap'>{
    const m = selectedObject.motor;
    m.dispose();
    motors.splice(motors.indexOf(m), 1);
    selectedObject = null;
    updateVisuals();
  }</pre></td></tr><tr><td><code>d2156dbdfac24d5d60d5e7fc55569bef</code></td><td><code>main.js:649-655</code></td><td><pre style='white-space:pre-wrap'>{
    const m = selectedObject.motor;
    m.dispose();
    motors.splice(motors.indexOf(m), 1);
    selectedObject = null;
    updateVisuals();
  }</pre></td></tr></table></div><div style='margin-bottom:12px'><div class='muted'>Fingerprint: <code>413d1ee57e1a8f5dfd012aca46640736</code> · size 2</div><table><tr><th>chunk_id</th><th>path:lines</th><th>code preview</th></tr><tr><td><code>f71fcab1abadd837bf23b78e493f3f16</code></td><td><code>main.js:268-271</code></td><td><pre style='white-space:pre-wrap'>{
      targetAnchor.jointAngle = currentJointAngle;
      targetAnchor.jointRotor.rotation.y = THREE.MathUtils.degToRad(currentJointAngle);
    }</pre></td></tr><tr><td><code>a3cb6e647846b57965a615da4a0ef688</code></td><td><code>main.js:282-285</code></td><td><pre style='white-space:pre-wrap'>{
      parentAnchor.jointAngle = currentJointAngle;
      parentAnchor.jointRotor.rotation.y = THREE.MathUtils.degToRad(currentJointAngle);
    }</pre></td></tr></table></div><div style='margin-bottom:12px'><div class='muted'>Fingerprint: <code>6ea470e22c7669b609cb05efab4dcaeb</code> · size 2</div><table><tr><th>chunk_id</th><th>path:lines</th><th>code preview</th></tr><tr><td><code>a3098da02438aef3416db7b66a8b64f6</code></td><td><code>main.js:366-371</code></td><td><pre style='white-space:pre-wrap'>if (targetAnchor) {
          m.attachTo(targetAnchor, myPointId);
        } else {
          scene.add(m.root);
          m.root.position.y = 2.5;
        }</pre></td></tr><tr><td><code>4c4c9c4a6a3432eb73baa1fbd260422a</code></td><td><code>main.js:516-521</code></td><td><pre style='white-space:pre-wrap'>if (targetAnchor) {
    m.attachTo(targetAnchor, attachPointId);
  } else {
    scene.add(m.root);
    m.root.position.y = 2.5;
  }</pre></td></tr></table></div><div style='margin-bottom:12px'><div class='muted'>Fingerprint: <code>32854dca440c9b8977d49ad241edcae5</code> · size 2</div><table><tr><th>chunk_id</th><th>path:lines</th><th>code preview</th></tr><tr><td><code>dcd6123d4456a27db0060230fb37ffe2</code></td><td><code>main.js:374-386</code></td><td><pre style='white-space:pre-wrap'>if (parent) {
          const parentAnchorGroup = parent.anchors.find(a =&gt; a.userData.id === d.parentPoint);
          if (parentAnchorGroup) {
            const targetAnchor = parentAnchorGroup.userData;
            m.attachTo(targetAnchor, d.myPoint);
            if (d.jointAngle !== undefined &amp;&amp; targetAnchor.jointRotor) {
              targetAnchor.jointAngle = d.jointAngle;
              targetAnchor.jointRotor.rotation.y = THREE.MathUtils.degToRad(d.jointAngle);
            }
          }
        } else {
          orphans.add(m.id);
        }</pre></td></tr><tr><td><code>a4c8565f4d45976a22bbce515d6ef924</code></td><td><code>main.js:436-448</code></td><td><pre style='white-space:pre-wrap'>if (parent) {
          const parentAnchorGroup = parent.anchors.find(a =&gt; a.userData.id === d.parentPoint);
          if (parentAnchorGroup) {
            const targetAnchor = parentAnchorGroup.userData;
            m.attachTo(targetAnchor, d.myPoint);
            if (d.jointAngle !== undefined &amp;&amp; targetAnchor.jointRotor) {
              targetAnchor.jointAngle = d.jointAngle;
              targetAnchor.jointRotor.rotation.y = THREE.MathUtils.degToRad(d.jointAngle);
            }
          }
        } else {
          orphans.add(m.id);
        }</pre></td></tr></table></div><div style='margin-bottom:12px'><div class='muted'>Fingerprint: <code>54fd3d164f7a62e91d24db4400803942</code> · size 2</div><table><tr><th>chunk_id</th><th>path:lines</th><th>code preview</th></tr><tr><td><code>cce67ce17502cfac388318592faf8c4d</code></td><td><code>main.js:374-384</code></td><td><pre style='white-space:pre-wrap'>{
          const parentAnchorGroup = parent.anchors.find(a =&gt; a.userData.id === d.parentPoint);
          if (parentAnchorGroup) {
            const targetAnchor = parentAnchorGroup.userData;
            m.attachTo(targetAnchor, d.myPoint);
            if (d.jointAngle !== undefined &amp;&amp; targetAnchor.jointRotor) {
              targetAnchor.jointAngle = d.jointAngle;
              targetAnchor.jointRotor.rotation.y = THREE.MathUtils.degToRad(d.jointAngle);
            }
          }
        }</pre></td></tr><tr><td><code>38fe57b550a63b7dadb7a374bf9f5e7b</code></td><td><code>main.js:436-446</code></td><td><pre style='white-space:pre-wrap'>{
          const parentAnchorGroup = parent.anchors.find(a =&gt; a.userData.id === d.parentPoint);
          if (parentAnchorGroup) {
            const targetAnchor = parentAnchorGroup.userData;
            m.attachTo(targetAnchor, d.myPoint);
            if (d.jointAngle !== undefined &amp;&amp; targetAnchor.jointRotor) {
              targetAnchor.jointAngle = d.jointAngle;
              targetAnchor.jointRotor.rotation.y = THREE.MathUtils.degToRad(d.jointAngle);
            }
          }
        }</pre></td></tr></table></div><div style='margin-bottom:12px'><div class='muted'>Fingerprint: <code>97351e4f675ece618f2827b4d8a272a7</code> · size 2</div><table><tr><th>chunk_id</th><th>path:lines</th><th>code preview</th></tr><tr><td><code>9dddac8a2b9e8af263cc1c5e2ec33aff</code></td><td><code>main.js:376-383</code></td><td><pre style='white-space:pre-wrap'>if (parentAnchorGroup) {
            const targetAnchor = parentAnchorGroup.userData;
            m.attachTo(targetAnchor, d.myPoint);
            if (d.jointAngle !== undefined &amp;&amp; targetAnchor.jointRotor) {
              targetAnchor.jointAngle = d.jointAngle;
              targetAnchor.jointRotor.rotation.y = THREE.MathUtils.degToRad(d.jointAngle);
            }
          }</pre></td></tr><tr><td><code>cacaa57b41ecab5dd0fae2e33f1dd5d2</code></td><td><code>main.js:438-445</code></td><td><pre style='white-space:pre-wrap'>if (parentAnchorGroup) {
            const targetAnchor = parentAnchorGroup.userData;
            m.attachTo(targetAnchor, d.myPoint);
            if (d.jointAngle !== undefined &amp;&amp; targetAnchor.jointRotor) {
              targetAnchor.jointAngle = d.jointAngle;
              targetAnchor.jointRotor.rotation.y = THREE.MathUtils.degToRad(d.jointAngle);
            }
          }</pre></td></tr></table></div><div style='margin-bottom:12px'><div class='muted'>Fingerprint: <code>772583cfa8e671b46d50d03aa79e1bb3</code> · size 2</div><table><tr><th>chunk_id</th><th>path:lines</th><th>code preview</th></tr><tr><td><code>efcb60b79c3207871ef07c4dfe77ef94</code></td><td><code>main.js:376-383</code></td><td><pre style='white-space:pre-wrap'>{
            const targetAnchor = parentAnchorGroup.userData;
            m.attachTo(targetAnchor, d.myPoint);
            if (d.jointAngle !== undefined &amp;&amp; targetAnchor.jointRotor) {
              targetAnchor.jointAngle = d.jointAngle;
              targetAnchor.jointRotor.rotation.y = THREE.MathUtils.degToRad(d.jointAngle);
            }
          }</pre></td></tr><tr><td><code>f320fb303b3c638aed746533e7eb85c3</code></td><td><code>main.js:438-445</code></td><td><pre style='white-space:pre-wrap'>{
            const targetAnchor = parentAnchorGroup.userData;
            m.attachTo(targetAnchor, d.myPoint);
            if (d.jointAngle !== undefined &amp;&amp; targetAnchor.jointRotor) {
              targetAnchor.jointAngle = d.jointAngle;
              targetAnchor.jointRotor.rotation.y = THREE.MathUtils.degToRad(d.jointAngle);
            }
          }</pre></td></tr></table></div><div style='margin-bottom:12px'><div class='muted'>Fingerprint: <code>706e7790c39735e20ca11f1bdd7d1a8a</code> · size 2</div><table><tr><th>chunk_id</th><th>path:lines</th><th>code preview</th></tr><tr><td><code>ce2787cdcb8ab35a73044063b33a3e1a</code></td><td><code>main.js:379-382</code></td><td><pre style='white-space:pre-wrap'>if (d.jointAngle !== undefined &amp;&amp; targetAnchor.jointRotor) {
              targetAnchor.jointAngle = d.jointAngle;
              targetAnchor.jointRotor.rotation.y = THREE.MathUtils.degToRad(d.jointAngle);
            }</pre></td></tr><tr><td><code>01994d19e7b090ac480b675caa16c491</code></td><td><code>main.js:441-444</code></td><td><pre style='white-space:pre-wrap'>if (d.jointAngle !== undefined &amp;&amp; targetAnchor.jointRotor) {
              targetAnchor.jointAngle = d.jointAngle;
              targetAnchor.jointRotor.rotation.y = THREE.MathUtils.degToRad(d.jointAngle);
            }</pre></td></tr></table></div><div style='margin-bottom:12px'><div class='muted'>Fingerprint: <code>9c2cb73e88b3faa7196d0840097e4fac</code> · size 2</div><table><tr><th>chunk_id</th><th>path:lines</th><th>code preview</th></tr><tr><td><code>82e7b2bfecaaef163310b30df195ba8e</code></td><td><code>main.js:379-382</code></td><td><pre style='white-space:pre-wrap'>{
              targetAnchor.jointAngle = d.jointAngle;
              targetAnchor.jointRotor.rotation.y = THREE.MathUtils.degToRad(d.jointAngle);
            }</pre></td></tr><tr><td><code>f6cf8c7e2ecfd467c4fad727e7c0dfc4</code></td><td><code>main.js:441-444</code></td><td><pre style='white-space:pre-wrap'>{
              targetAnchor.jointAngle = d.jointAngle;
              targetAnchor.jointRotor.rotation.y = THREE.MathUtils.degToRad(d.jointAngle);
            }</pre></td></tr></table></div><div style='margin-bottom:12px'><div class='muted'>Fingerprint: <code>eb5b912bb7169b9e292c0a4dd9199dc9</code> · size 2</div><table><tr><th>chunk_id</th><th>path:lines</th><th>code preview</th></tr><tr><td><code>435979549fd0b85e1532d4eee4a23f8e</code></td><td><code>main.js:391-397</code></td><td><pre style='white-space:pre-wrap'>if (orphans.size &gt; 0) {
      motors.splice(
        0,
        motors.length,
        ...motors.filter(m =&gt; !orphans.has(m.id))
      );
    }</pre></td></tr><tr><td><code>00025a0607f7a507c0c08976787d7a51</code></td><td><code>main.js:453-459</code></td><td><pre style='white-space:pre-wrap'>if (orphans.size &gt; 0) {
      motors.splice(
        0,
        motors.length,
        ...motors.filter(m =&gt; !orphans.has(m.id))
      );
    }</pre></td></tr></table></div><div style='margin-bottom:12px'><div class='muted'>Fingerprint: <code>383f06069b519c0227fad4887906172c</code> · size 2</div><table><tr><th>chunk_id</th><th>path:lines</th><th>code preview</th></tr><tr><td><code>cd2a6efa4d68cc0dcfbe07e6b04b32f4</code></td><td><code>main.js:391-397</code></td><td><pre style='white-space:pre-wrap'>{
      motors.splice(
        0,
        motors.length,
        ...motors.filter(m =&gt; !orphans.has(m.id))
      );
    }</pre></td></tr><tr><td><code>d852dd5c2c727968814d61908f803c81</code></td><td><code>main.js:453-459</code></td><td><pre style='white-space:pre-wrap'>{
      motors.splice(
        0,
        motors.length,
        ...motors.filter(m =&gt; !orphans.has(m.id))
      );
    }</pre></td></tr></table></div><div style='margin-bottom:12px'><div class='muted'>Fingerprint: <code>b18dfc7104f23d8100e32e896d9c3ee3</code> · size 2</div><table><tr><th>chunk_id</th><th>path:lines</th><th>code preview</th></tr><tr><td><code>233406b556b2dad20378656d6992811a</code></td><td><code>main.js:552-556</code></td><td><pre style='white-space:pre-wrap'>{
      uiInfoType.innerText = 'Занята';
      uiInfoVal.innerText = '-';
      labelActions.innerText = 'Сменить на точку:';
    }</pre></td></tr><tr><td><code>0e97c5ef90150e75e5a92fc0a77cd182</code></td><td><code>main.js:556-560</code></td><td><pre style='white-space:pre-wrap'>{
      uiInfoType.innerText = 'Свободна';
      uiInfoVal.innerText = '-';
      labelActions.innerText = 'Добавить модуль:';
    }</pre></td></tr></table></div>
    </div>
  </div>

  <h2>Output files</h2>
  <ul>
    <li><code>stats.json</code> — summary</li>
    <li><code>chunks.jsonl</code> — extracted chunks (includes raw + normalized text)</li>
    <li><code>candidates_exact_dups.jsonl</code> — local exact-duplicate candidates</li>
  </ul>
</body>
</html>
